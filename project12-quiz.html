<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz App</title>
    <link rel="stylesheet" href="project12-quiz.css">
</head>
<body>
    <h1>Quiz App</h1>
    <div id="quizcontainer">
        <p id="question"></p>
        <div id="option"></div>
        <p>Time Left:<span id="timer">10</span></p>
        <p>Score: <span id="score">0</span></p>
        
    </div>
        <button onclick="startquiz()">Start Quiz</button>
        <button onclick="viewscores()">View Scores</button>
</body>
<script>
    const quizdata = [
        {
            question:"Which language rusn in a web browser?",
            option:["Java","C","Python","Javascript"],
            answer:"Javascript"
        },
        {
            question : "What does CSS Stand for ?",
            option:["Central Style Sheet","Cascading Style Sheet","Computer Style Sheet","Creative Style Sheet"],
            answer:"Cascading Style Sheet"
        },
        {
            question:"Which HTML tag is used to display image?",
            option:["<img>","<image>","<src>","<pic>"],
            answer:"<img>"
        },
        {
        question:"What does HTML stand for?",
        option:["Hyper Trainer Marking Language","Hyper Text Markup Language","Hyper Text Marketing Language","Hyper Tool Markup Language"],
        answer:"Hyper Text Markup Language"
    },
    {
        question:"Which company developed JavaScript?",
        option:["Microsoft","Netscape","Google","Apple"],
        answer:"Netscape"
    },
    {
        question:"Which symbol is used for single-line comments in JavaScript?",
        option:["<!-- -->","//","#","/* */"],
        answer:"//"
    },
    {
        question:"Which property is used to change the text color in CSS?",
        option:["font-color","color","text-color","background-color"],
        answer:"color"
    },
    {
        question:"Which method is used to print something in the browser console?",
        option:["console.print()","print()","console.log()","log()"],
        answer:"console.log()"
    },
    {
        question:"Which HTML element is used for the largest heading?",
        option:["<h6>","<heading>","<h1>","<head>"],
        answer:"<h1>"
    },
    {
        question:"Which attribute is used to provide a unique identifier to an HTML element?",
        option:["class","id","name","style"],
        answer:"id"
    }
    ]
    let score = 0;
    let currentindex = 0;
    let timeleft = 10;
    let timer;

    function fetchquizdata(){
        return new Promise((resolve)=>{
            setTimeout(()=>resolve(quizdata),1000)   //change to 9 secs
        });
    }

    async function startquiz(){
        score  = 0;
        currentindex = 0;
        const questions = await fetchquizdata();
        loadquestion(questions);

    }
    function loadquestion(questions) {
        if(currentindex >= questions.length) {
            endquiz();
            return;
        }
        const {question, option, answer} = questions[currentindex];
        document.getElementById("question").innerText = question;
        const optionsDiv = document.getElementById("option");
        optionsDiv.innerHTML = "";
        option.forEach(opt => {
            const btn = document.createElement("button");
            btn.innerText = opt;
            btn.className = "option";
            btn.onclick = () => checkanswer(opt, answer, questions);
            optionsDiv.appendChild(btn);
        });

        timeleft = 10;
        document.getElementById("timer").innerText = timeleft;
        clearInterval(timer);
        timer = setInterval(() => {
            timeleft--;
            document.getElementById("timer").innerText = timeleft;
            if(timeleft === 0){
                clearInterval(timer);
                nextquestion(questions);
            }
        },1000);
    }


    function nextquestion(questions2){
        currentindex++;
        loadquestion(questions);
    }


    function checkanswer(selected,correct,question){
        if(selected == correct){
            score++;
            document.getElementById("score").innerText = score;
        }
        nextquestion(questions);

    }

    function endquiz(){
        clearInterval(timer);
        alert(`!!! Quiz Over!!! Your Score is : ${score}`);
        let pastscores = JSON.parse(localStorage.getItem("quizscores")) || [];
        localStorage.setItem("quizscores",JSON.stringify(pastscores));

    }

   function viewscores(){
        let pastscores = JSON.parse(localStorage.getItem("quizscores")) || [];
        alert(`Past Scores : ${pastscores.join(",")}`);

    }
</script>
</html>
